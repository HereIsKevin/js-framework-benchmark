window.requestIdleCallback=window.requestIdleCallback||((e,t,n=performance.now())=>window.setTimeout(e,0,{didTimeout:!1,timeRemaining:()=>Math.max(0,5-(performance.now()-n))}));var Oe=((e=document.createRange())=>(e.selectNodeContents(e.createContextualFragment("<template>").lastChild),e.createContextualFragment.bind(e)))(),j=new WeakMap,S=new WeakMap,g=new WeakMap,v=new WeakMap,_=new WeakMap,R=new WeakMap,h=new WeakMap,U=new WeakMap,we=Symbol("boundFunctions"),X=!0,Te=!0,Y=!1,xe=!0,Ae=/\{\{((\s|.)*?)\}\}/,Le=/<(\/?)(html|head|body)(>|\s.*?>)/g,Ce=/\n/g,Ie=/[\.\[\]]/,W=/^on/,Pe=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];function m(e){return e!=null&&typeof e=="object"}function E(e){return typeof e=="function"}function y(e){return e.splitText!==void 0}function A(e){return e instanceof Node}function O(e){return e.nodeName!=="svg"&&"getElementById"in e}function w(e){return m(e)&&"event"in e&&"options"in e}function T(e){return Reflect.get(e,"isProxy")}function le(e){return m(e)&&typeof e.then=="function"}function Z(){return Math.random().toString(32).slice(2)}function $(e,t,n){return Pe.includes(t)&&!n?(e.removeAttribute(t),!1):(e.setAttribute(t,n),!0)}function k(e,t,n){e.addEventListener(t,E(n)?n:n.event,E(n)?{}:n.options)}function fe(e,...t){let n={},o=[],i=t.map((l,u)=>{let p=`<template id="lbInsertNodes${u}"></template>`;switch(l){case(A(l)&&l):return o.push(l),p;case((["number","string","symbol","boolean","bigint"].includes(typeof l)||Reflect.get(l,"reactive"))&&l):return String(l);case((E(l)||w(l))&&l):let f=Z();return Reflect.set(n,f,l),f;case(Array.isArray(l)&&l):return l.forEach((N,x)=>{A(N)&&(o.push(N),l[x]=p)}),l.join("");case(m(l)&&l):let d="";return Object.entries(l).forEach(([N,x])=>{if(E(x)||w(x)){let re=Z();Reflect.set(n,re,x),d+=`${N}="${re}"`}else d+=`${N}="${x}"`}),d}}),c=String.raw(e,...i).trim();c=c.replace(Le,"<$1$2-dummy$3");let r=Oe(c),s=document.createNodeIterator(r,window.NodeFilter.SHOW_ELEMENT,{acceptNode(l){return l.localName.endsWith("-dummy")?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),a;for(;a=s.nextNode();){let l=a.localName.replace("-dummy",""),u=document.createElement(l);u.append(...a.childNodes),a.replaceWith(u)}return r.querySelectorAll("template[id^=lbInsertNodes]").forEach(l=>l.replaceWith(o.shift())),xe&&z(r,n),r.childNodes.length>1?r:r.firstChild?r.firstChild:document.createTextNode("")}function z(e,t){let n=document.createNodeIterator(e,window.NodeFilter.SHOW_ELEMENT),o;for(;o=n.nextNode();){o.getAttributeNames().forEach(c=>{if(t&&c.startsWith("on")){let r=c.replace(W,""),s=t[o.getAttribute(c)];if(!s){V(o,c);return}o.removeAttribute(c),w(s)?(o.addEventListener(r,s.event,s.options),S.has(o)?S.get(o).push(s.event):S.set(o,[s.event])):(o.addEventListener(r,s),S.has(o)?S.get(o).push(s):S.set(o,[s]))}else V(o,c)});let i=o.firstChild;for(;i;)y(i)&&V(i),i=i.nextSibling}}function V(e,t){let n,o;for(y(e)?n=e.nodeValue:(n=e.getAttribute(t),n===""&&(n=t,n.startsWith("{{")&&e.removeAttribute(n)));o=n.match(Ae);){let[i,c]=o,r=c.trim().replace(Ce,"").split(Ie).filter(Boolean),[s,a]=F(r),l=r[r.length-1],u=o.index,p=u+String(s).length;if(A(s)){e.nodeValue=n.replace(i,""),e.after(s),K(u,p,s,l,a,t);return}if(y(e)){let f=m(s)?JSON.stringify(s):s??"";n=n.replace(i,f),n!=null&&(e.nodeValue=n)}else if(t==="bind"){n=n.replace(i,""),e.removeAttribute(t);let f=m(s)&&T(s)?s:a;_.has(f)?_.get(f).push(e):_.set(f,[e]);continue}else if(t==="two-way"){let f=d=>{e.addEventListener(d,({target:N})=>{Reflect.set(a,l,N.value)})};e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&e.type==="text"?(e.value=s,f("input")):e instanceof HTMLSelectElement?(e.value=s,f("change")):e instanceof HTMLInputElement&&e.type==="radio"?(e.checked=e.value===s,f("change")):e instanceof HTMLInputElement&&e.type==="checkbox"&&(e.checked=s.includes(e.name),e.addEventListener("change",({target:d})=>{d.checked?s.includes(e.name)||s.push(e.name):s.splice(s.indexOf(e.name),1)})),n=n.replace(i,""),e.setAttribute("two-way","")}else if(E(s)||w(s))n=n.replace(i,""),e.removeAttribute(t),k(e,t.replace(W,""),s);else if(m(s)){Object.entries(s).forEach(([f,d])=>{n=n.replace(i,""),E(d)||w(d)?k(e,f.replace(W,""),d):(l=f,$(e,f,d)?p=u+String(d).length:p=u),K(u,p,e,l,s,f)});continue}else n=n.replace(i,s),$(e,t,n===String(s)?s:n)||(n=n.replace(s,""));K(u,p,e,l,a,t)}}function K(e,t,n,o,i,c){let r=[e,t,c];if(j.has(n)?j.get(n).push(r):j.set(n,[r]),g.has(i)){let s=g.get(i);if(s.has(o)){let a=s.get(o);if(a.has(n))a.get(n).push(r);else{let l=[r];a.set(l,n),a.set(n,l)}}else{let a=[r];s.set(o,new Map([[a,n],[n,a]]))}}else{let s=[r];g.set(i,new Map([[o,new Map([[s,n],[n,s]])]]))}}function F(e){let t,n;return t=n=L,e.forEach(o=>{n=t,t=Reflect.get(n,o)}),[t,n]}function ee(e,t,n){let o=[],i=[];if(y(e))return R.has(e)&&o.push(R.get(e)),h.has(e)&&o.push(h.get(e)),R.has(t)&&i.push(R.get(t)),h.has(t)&&i.push(h.get(t)),!(o.length!==i.length||String(o)!==String(i));if(S.has(e)&&o.push(...S.get(e)),S.has(t)&&i.push(...S.get(t)),R.has(e)&&o.push(R.get(e)),h.has(e)&&o.push(h.get(e)),R.has(t)&&i.push(R.get(t)),h.has(t)&&i.push(h.get(t)),o.length!==i.length||String(o)!==String(i))return!1;for(let c=0;c<e.childNodes.length;c++)if(n){if(y(e.childNodes[c])&&!ee(e.childNodes[c],t.childNodes[c],n))return!1}else if(!ee(e.childNodes[c],t.childNodes[c]))return!1;return!0}function ae(e,t,n){return e.isEqualNode(t)&&ee(e,t,n)}function H(e,t="",n=X){if(n)return C(H,e,t,!1),ue(e);Reflect.get(e,"reactive")&&(e=I(e));let o;if(O(e)&&(o=Array.from(e.childNodes),U.set(e,o)),!t)document.body.append(e);else{if(typeof t=="string"){let i=document.querySelector(t);if(i)t=i;else return()=>{}}Te?y(e)?(J(e,t),M(t,h)):ae(e,t)||We(e,t):(J(e,t),M(t,h))}return M(e,R),o?.forEach(i=>{M(i,R)}),ue(O(e)?o:e)}function te(e,t){if(t.has(e)){let n=t.get(e);X?C(n):n(),t.delete(e)}}function M(e,t){if(t===R&&!$e||t===h&&!de)return;te(e,t);let n=document.createNodeIterator(e,window.NodeFilter.SHOW_ELEMENT),o;for(;o=n.nextNode();){te(o,t);let i=o.firstChild;for(;i;)y(i)&&te(i,t),i=i.nextSibling}}function Fe(e,t){for(let[n,o]of e.entries())for(let i=0;i<o.length;i++){let c=o[i];(t.contains(c)||t.isSameNode(c))&&(o.splice(i,1),i--),o.length===0&&e.delete(n)}}function We(e,t){let n=document.createNodeIterator(e,window.NodeFilter.SHOW_ELEMENT),o=document.createNodeIterator(t,window.NodeFilter.SHOW_ELEMENT),i;Y&&(i=document.createElement("template"),t===document.documentElement?t.append(i):O(t)?U.get(t)[0].before(i):t.before(i),i.append(e));let c,r=new Map;for(;c=o.nextNode();)Y&&c===i||(r.has(c.localName)?r.get(c.localName).push(c):r.set(c.localName,[c]));let s;for(;s=n.nextNode();){let a=r.get(s.localName);if(a)for(let l=0;l<a.length;l++){let u=a[l];if(ae(s,u,!0)){s.replaceWith(u),M(s,h),Fe(r,u);break}}}if(Y){let a=O(e)?Array.from(i.childNodes):[e];if(O(t)){let l=U.get(t);a.forEach(u=>l[0].before(u)),l.forEach(u=>u.remove())}else t.replaceWith(...a);i.remove(),M(t,h)}else J(e,t),M(t,h);r.clear()}function J(e,t){if(O(t)){let n=U.get(t);if(O(e)){let o=Array.from(e.childNodes);n.forEach((i,c)=>{c<o.length?H(o[c],i):i.remove()})}else n.forEach((o,i)=>{i===0?H(e,o):o.remove()})}else t.replaceWith(e)}function ue(e){return Array.isArray(e)?()=>e.forEach(B):()=>B(e)}function B(e){e.isConnected&&(e.remove(),M(e,h))}function C(e,...t){navigator.scheduling?navigator.scheduling.isInputPending()?setTimeout(C,0,e,t):e(...t):window.requestIdleCallback(()=>e(...t))}function D(e){let t;do t=Z();while(Reflect.has(L,t));Reflect.set(L,t,e),Reflect.set(o,"reactive",!0);let n=pe(o,[t]);return n;function o(i){let c=(this&&Reflect.get(this,"reactive")?this:n).__keys__,[r,s]=F(c),a=c[c.length-1];if(E(i)){let l=i(r);if(r===l)return;Reflect.set(s,a,l??r)}else Reflect.set(s,a,i)}}function pe(e,t){return new Proxy(e,{get(n,o,i){return o==="reactive"?!0:o==="__keys__"?t:o===Symbol.toPrimitive?()=>`{{${t.join(".")}}}`:pe(n,[...t,o])}})}function he(e){let t=e.__keys__;return[t[t.length-1],t.length===1]}function ne(e){let[t,n]=he(e);if(n)Reflect.set(L,t,null);else{let[o,i]=F(e.__keys__);Reflect.set(i,t,null)}}function se(e,t){let[n,o]=he(e);if(o)L.observe(n,t);else{let[i,c]=F(e.__keys__);c.observe(n,t)}}function ge(e,t,n,o=e){let i=r=>(!Reflect.get(e,"reactive")&&E(e)?e(r):le(r)?!1:r)?E(t)?t():t:E(n)?n():n,c=D(i(I(o)));return se(o,r=>{r===null?ne(c):c(i(r))}),c}var me=!1,Ee=new Set,P=new WeakMap,Ve=new WeakMap;function I(e){let[t]=F(e.__keys__);return t}var $e=!1;var de=!1;function be(e,t,...n){de=!0,h.set(t,n.length?e.bind(e,...n):e)}function ie(e={}){let t=Symbol("handlers"),n=new WeakMap,o=new Proxy(e,{set(i,c,r,s){me&&(Ee.add(s),P.has(s)?P.get(s).add(c):P.set(s,new Set([c])));let a=!0,l=Reflect.get(i,c,s);if(l===r)return a;if(r===null){if(g.has(s)){let f=g.get(s);f.delete(String(c)),f.size===0&&g.delete(s)}let p=Reflect.get(i,t,s);if(p.has(c)){let f=p.get(c);f.forEach(d=>d(null,l)),f.clear(),s.unobserve(c)}return m(l)&&T(l)?(g.delete(l),_.has(l)&&(_.get(l).forEach(B),_.delete(l)),Ne(l)):_.has(s)&&(_.get(s).forEach(B),_.delete(s)),a=Reflect.deleteProperty(s,c),a}if(le(r))return r.then(f=>{s[c]=f}).catch(f=>{console.error(f),s[c]=null}),a=Reflect.set(i,c,r,s),a;A(r)?a=Reflect.set(i,c,r,s):m(r)&&!T(r)?(a=Reflect.set(i,c,ie(r),s),Object.entries(r).forEach(([p,f])=>{m(f)&&!T(f)&&Reflect.set(r,p,ie(f))})):a=Reflect.set(i,c,r,s);let u=Reflect.get(i,c,s);return g.has(l)?Re(l,c,u,l):g.has(s)&&Re(s,c,u,l),m(r)&&T(r)&&g.has(l)&&(v.set(l,g.get(l)),v.has(r)?(g.set(l,v.get(r)),v.delete(r)):g.set(l,g.get(r))),a&&Reflect.get(i,t,s).get(c)?.forEach(p=>p(u,l)),m(l)&&T(l)&&Ne(l,u),a},get(i,c,r){me&&(Ee.add(r),P.has(r)?P.get(r).add(c):P.set(r,new Set([c])));let s=Reflect.get(i,c,r);return E(s)?(n.has(s)||n.set(s,s.bind(i)),n.get(s)):s}});return Reflect.defineProperty(o,"isProxy",{value:!0}),Reflect.defineProperty(o,"asyncUpdate",{value:X,writable:!0}),Reflect.defineProperty(o,t,{value:new Map}),Reflect.defineProperty(o,"observe",{value:(i,c)=>{let r=Reflect.get(o,t);r.has(i)?r.get(i).add(c):r.set(i,new Set([c]))},configurable:!0}),Reflect.defineProperty(o,"getObservers",{value:()=>Reflect.get(o,t),configurable:!0}),Reflect.defineProperty(o,"unobserve",{value:(i,c)=>{let r=Reflect.get(o,t);if(i){if(r.has(i))if(c==null)r.delete(i);else{let s=r.get(i);s?.has(c)&&s.delete(c)}}else r.clear()},configurable:!0}),window.queueMicrotask(()=>{o===L&&Reflect.defineProperty(o,we,{value:n})}),o}function Ne(e,t){e.getObservers().forEach(i=>i.clear()),e.unobserve();let o=[];Object.entries(e).forEach(([i,c])=>{m(c)&&T(c)&&(o.push(i),(!t||!Reflect.has(t,i)||c!==Reflect.get(t,i))&&Reflect.set(e,i,null))}),Array.isArray(e)&&o.reverse().forEach(i=>o.splice(i,1))}function Re(e,t,n,o){let i=g.get(e);i.has(String(t))&&(Reflect.get(e,"asyncUpdate")?C(G,i,String(t),n,o):G(i,String(t),n,o)),m(n)&&Object.entries(n).forEach(([c,r])=>{let s=m(o)&&Reflect.get(o,c)||o;i.has(c)&&(Reflect.get(e,"asyncUpdate")?C(G,i,c,r,s):G(i,c,r,s))})}function G(e,t,n,o){let i=e.get(t);i.forEach(c=>{if(A(c)){if(!c.isConnected){let r=i.get(c);i.delete(c),i.delete(r)}return}c.forEach(r=>{let s=i.get(c),[a,l,u]=r,p=!1;if(A(n))J(n,s),M(s,h);else if(y(s)){p=!0;let f=s.nodeValue;s.nodeValue=f.substring(0,a)+String(n)+f.substring(l)}else if(u==="two-way")s instanceof HTMLTextAreaElement||s instanceof HTMLSelectElement||s instanceof HTMLInputElement&&s.type==="text"?s.value=String(n):s instanceof HTMLInputElement&&(s.type==="checkbox"||s.type==="radio")&&(s.checked=Array.isArray(n)?n.includes(s.name):String(n)===s.value);else if(E(n)||w(n)){let f=u.replace(W,"");s.removeEventListener(f,E(n)?n:n.event),k(s,f,n)}else if(m(n))Object.entries(n).forEach(([f,d])=>{if(E(d)||w(d)){let N=f.replace(W,"");s.removeEventListener(N,E(d)?d:d.event),k(s,N,d)}else $(s,f,d)});else{p=!0;let f=s.getAttribute(u);f?(f=f.substring(0,a)+String(n)+f.substring(l),$(s,u,f===String(n)?n:f)):$(s,u,n)}if(p){r[1]=a+String(n).length;let f;j.get(s)?.forEach(d=>{if(d===r){f=!0;return}if(f&&(y(s)||u===d[2])){let N=String(o).length-String(n).length;d[0]-=N,d[1]-=N}})}})})}function Se(e,t,n){let o=e.content.cloneNode(!0).firstChild,i=o.innerHTML;for(let[c,r]of Object.entries(t))i=i.replace(c,String(r));return o.innerHTML=i,C(z,o.firstChild,n),o.firstChild}var L=ie(),Q=document.querySelector.bind(document),Ke=document.querySelectorAll.bind(document);var _e=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],ye=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],Me=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],He=_e.length,qe=ye.length,je=Me.length,ve=1;function ce(e){let t=new Array(e);for(let n=0;n<e;n++)t[n]={id:ve++,label:_e[oe(He)]+" "+ye[oe(qe)]+" "+Me[oe(je)]};return t}function oe(e){return Math.random()*e|0}z(Q("#main"),{run:ke,runLots:ze,add:Ue,update:Be,clear:Je,swapRows:De});var b=D([]),q=D(-1);se(b,(e,t)=>{Ge(e,t);for(let n=t.length;n<e.length;n++)Qe(e[n],n);e.length||H(fe`<tbody></tbody>`,"tbody"),(!e.length||!t.length)&&q(-1)});function Ue(){b(e=>[...e,...ce(1e3)])}function ke(){b(ce(1e3))}function ze(){b(ce(1e4))}function Je(){b([])}function Be(){let e=I(b),t=0;for(;t<e.length;)b[t].setter(n=>{n.label+=" !!!"}),t+=10}function De(){b(e=>{e.length>998&&(Xe(e),[e[1],e[998]]=[e[998],e[1]])})}function Ye(e){let t=I(b).findIndex(n=>n.id===e);b[t].setter(null),b(n=>{n.splice(t,1)})}function Xe(e){let t=e[1].id,n=e[998].id;[t,n].includes(I(q))&&q(o=>o===t?n:t)}function Ge(e,t){for(let n=0;n<t.length&&e.length;n++)t[n].id=e[n].id,t[n].label=e[n].label,e[n]=t[n]}function Qe(e,t){let n=ge(i=>i===e.id,"danger","",q),o=Se(Q("#singleRow"),{ternaryClass:n,bindData:b[t],dataId:b[t].id,dataLabel:b[t].label},{remove:()=>Ye(e.id),select:()=>q(e.id)});be(ne,o,n),Q("tbody").appendChild(o)}
